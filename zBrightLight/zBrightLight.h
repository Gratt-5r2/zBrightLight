// Supported with union (c) 2020 Union team
// Union HEADER file

namespace GOTHIC_ENGINE {

  static const uint IndorAddress = ZenDef( 0x005B2BDF, 0x005CFE52, 0x005D277A, 0x005D953A );
  static const uint TextAddress  = ZenDef( 0x00714976, 0x007550F2, 0x0075FC1E, 0x0064B1BE );
  static const uint SkyAddress   = ZenDef( 0x0074020D, 0x007521AF, 0x00764914, 0x00651274 );
  static const uint InitAddress  = ZenDef( 0x00000000, 0x00000000, 0x0075BECF, 0x0064746E );
  static int* TextureStatesOP    = (int*)ZenDef( 0x007DEE60, 0x00821E10, 0x0082F6B0, 0x0083AFD0 );
  static int* TextureStagesTA    = (int*)ZenDef( 0x007DEF20, 0x00821ED0, 0x0082F770, 0x0083B090 );
  static int s_D3DStageLocked    = 0;
  static bool s_PluginEnabled    = true;



#if ENGINE == Engine_G1
  // [52] 0x005B2BDF - Indoor
  // [35] 0x00714976 - Text
  // [33] 0x0074020D - Clouds
  const uint D3DTOP_Table[] = {
    0x00717113,	0x00718B17,	0x00714570,	0x005B245B, // 4
    0x00717122,	0x00718B27,	0x00714583,	0x005B24F6, // 8
    0x00717130,	0x00718B37,	0x00714592,	0x005B29A5, // 12
    0x0071713E,	0x00718B46,	0x007145A1,	0x005B29BF, // 16
    0x00710EC0,	0x00718B55,	0x007145B1,	0x005B292E, // 20
    0x00710ED0,	0x00718D99,	0x007145C1,	0x005B2A1E, // 24
    0x00710EE0,	0x00718DBA,	0x007145D0,	0x005B29D5, // 28
    0x00710EF0,	0x00718F4A,	0x007148BD,	0x00718E5F, // 32
    0x0074020D,	0x00718F6C,	0x00714976,	0x00718F5B, // 36
    0x00710F00,	0x00718980,	0x0071463D,	0x0071447B, // 40
    0x00710F10,	0x0071898F,	0x00714879,	0x005B2747, // 44
    0x00710F1F,	0x0071899D,	0x00714889,	0x005B2475, // 48
    0x00710F2F,	0x007189B4,	0x00719FB5,	0x005B2BDF, // 52
    0x00710F3E,	0x007189D2,	0x00719FC5,	0x005B2C28, // 56
    0x00719D3F,	0x00718E10,	0x0071A009,	0x00718E81, // 60
    0x00719D4F,	0x00718E32,	0x0071A019,	0x00718E21, // 64
    0x00719D5F,	0x005B2713,	0x0071A029,	0x00718F80, // 68
    0x0071446B,	0x005B2761,	0x00714C60,	0x00718F91, // 72
    0x0071452E,	0x005B29EE,	0x00718A5C,	0x00715E78, // 76
    0x0071453D,	0x005B2447,	0x00718B07,	0x00715E87, // 78
    0x00716270
  };

  enum zERenderObject {
    Other      = 0,
    Indoor     = 51, // 0x005B2BDF
    Outdoor    = 7,  // 0x005B24F6
    Effects    = 0,  // 
    Shadows    = 0,  // 
    Barrier    = 33, // 0x00718F6C
    ScreenText = 11, // 0x005B29A5
    Interface  = 100
  };
#endif


#if ENGINE == Engine_G1A
  // [68] 0x005CFE52 - Indoor
  // [22] 0x007550F2 - Text
  // [71] 0x007521AF - Clouds
  const uint D3DTOP_Table[] = {
    0x0075308D,	0x00754C6B,	0x00750375,	0x00754F91, // 4
    0x0075309C,	0x00754C7A,	0x00750385,	0x00754F80, // 8
    0x007530AA,	0x00754EED,	0x00750395,	0x00754FBE, // 12
    0x007530B8,	0x00754F13,	0x007503A4,	0x00750CF0, // 16
    0x0074C813,	0x007550E1,	0x00750693,	0x00750D00, // 20
    0x0074C823,	0x007550F2,	0x00750758,	0x00750D31, // 24
    0x0074C833,	0x00754A7D,	0x00750411,	0x00750D41, // 28
    0x0074C843,	0x00754A8C,	0x0075064D,	0x00750D51, // 32
    0x00812F83,	0x00754A9A,	0x0075065D,	0x00750D61, // 36
    0x0074C853,	0x00754AB1,	0x007561A5,	0x00750D7C, // 40
    0x0074C863,	0x00754AD3,	0x007561B5,	0x00750D8C, // 44
    0x0074C873,	0x005CF973,	0x007561F9,	0x00750DC7, // 48
    0x0074C883,	0x005CF9C9,	0x00756209,	0x00750DEB, // 52
    0x0074C893,	0x005CFC5E,	0x00756219,	0x00751026, // 56
    0x00755F1F,	0x005CF697,	0x00750A81,	0x005CF9AF, // 60
    0x00755F2F,	0x005CF6AB,	0x00751D50,	0x005CF6C5, // 64
    0x00755F3F,	0x005CF746,	0x00751D60,	0x005CFE52, // 68
    0x0075023B,	0x005CFC15,	0x007521AF,	0x005CFE9B, // 72
    0x00750300,	0x005CFC2F,	0x00754B5C,	0x007550CE, // 76
    0x0075030F,	0x005CFC8E,	0x00754C2C,	0x0075024D, // 78
    0x00750344,	0x005CFC45,	0x00754C3C,	0x00755115, // 82
    0x00750357,	0x005CFB96,	0x00754C4C,	0x00755126, // 86
    0x00750366,	0x00754F6D,	0x00754C5C,	0x00754FEB  // 90
  };

  enum zERenderObject {
    Other      = 0,
    Indoor     = 67, // 0x005CFE52
    Outdoor    = 65, // 0x005CF746
    Effects    = 0,  // 
    Shadows    = 0,  // 
    Barrier    = 21, // 0x007550F2
    ScreenText = 69, // 0x005CFC15
    Interface  = 100
  };
#endif


#if ENGINE == Engine_G2
  // [64] 0x005D277A - Indoor
  // [35] 0x0075FC1E - Text
  // [62] 0x00764914 - Sky
  const uint D3DTOP_Table[] = {
    0x00762933,	0x00764325,	0x0075F82E,	0x005D1EDE, // 4
    0x00762942,	0x00764345,	0x0075F845,	0x005D1F75, // 8
    0x00762950,	0x0075FD8A,	0x0075F853,	0x005D2465, // 12
    0x0076295E,	0x007643CC,	0x0075F861,	0x005D247F, // 16
    0x0075BE43,	0x00764479,	0x0075F86F,	0x005D23C4, // 20
    0x0075BE53,	0x0076448A,	0x0075F87D,	0x005D24E6, // 24
    0x0075BEAD,	0x0076449B,	0x0075F88A,	0x005D252E, // 28
    0x0075BECF,	0x007644AC,	0x0075FB70,	0x005D21C7, // 32
    0x0075BEDF,	0x007644BD,	0x0075FC1E,	0x005D2498, // 36
    0x0075BEF9,	0x007644CE,	0x0075F8F2,	0x005D1F33, // 40
    0x0075BF09,	0x00764751,	0x0075FB2E,	0x005D256C, // 44
    0x0075BF18,	0x00764776,	0x0075FB3E,	0x0076480F, // 48
    0x0075BF28,	0x007648E1,	0x00765D25,	0x007647C6, // 52
    0x0075BF37,	0x007648F2,	0x00765D35,	0x007647E5, // 56
    0x00765A09,	0x00764905,	0x00765D7C,	0x005D1F03, // 60
    0x00765A29,	0x00764914,	0x00765D8C,	0x005D277A, // 64
    0x00765A39,	0x005D2193,	0x00765D9C,	0x005D27C3, // 68
    0x0075F750,	0x005D21E1,	0x007642EB,	0x007648D0, // 72
    0x0075F800,	0x005D250D,	0x007642FB,	0x007647D6, // 76
    0x0075F81E,	0x005D1ECA,	0x0076430B,	0x0075F75F  // 80
  };

  enum zERenderObject {
    Other      = 0,
    Indoor     = 63, // 0x005D277A
    Outdoor    = 7,  // 0x005D1F75
    Effects    = 0,  // 
    Shadows    = 0,  // 
    Barrier    = 53, // 0x007648F2
    ScreenText = 11, // 0x005D2465
    Interface  = 100
  };
#endif


#if ENGINE == Engine_G2A
  // [66] 0x005D953A - Indoor
  // [73] 0x0064B1BE - Text
  // [30] 0x00651274 - Sky
  const uint D3DTOP_Table[] = {
    0x0064DED3,	0x00650E1D,	0x0064AE92,	0x005D923F, // 4
    0x0064DEE2,	0x00650E2E,	0x0064B0CE,	0x005D92A6, // 8
    0x0064DEF0,	0x006510B1,	0x0064B0DE,	0x005D92EE, // 12
    0x0064DEFE,	0x006510D6,	0x00652685,	0x005D9184, // 16
    0x00652369,	0x00651241,	0x00652695,	0x005D932C, // 20
    0x00652389,	0x00651252,	0x006526DC,	0x005D8D0A, // 24
    0x00652399,	0x00651265,	0x006526EC,	0x005D95ED, // 28
    0x0064ACF0,	0x00651274,	0x006526FC,	0x005D9601, // 32
    0x0064ADA0,	0x005D8F53,	0x00650C4B,	0x005D9615, // 36
    0x0064ADBE,	0x005D8FA1,	0x00650C5B,	0x005D9629, // 40
    0x0064ADCE,	0x005D92CD,	0x00650C6B,	0x005D8CF3, // 44
    0x0064ADE5,	0x005D8C8A,	0x00650C85,	0x005D9258, // 48
    0x0064ADF3,	0x005D8C9E,	0x00650CA5,	0x00651126, // 52
    0x0064AE01,	0x005D8D35,	0x0064B32A,	0x00651145, // 56
    0x0064AE0F,	0x005D8F87,	0x00650D2C,	0x0065116F, // 60
    0x0064AE1D,	0x005D8CC3,	0x00650DD9,	0x00651230, // 64
    0x0064AE2A,	0x005D953A,	0x00650DEA,	0x00651136, // 68
    0x0064B110,	0x005D9583,	0x00650DFB,	0x0064ACFF, // 72
    0x0064B1BE,	0x005D9225,	0x00650E0C,	0x0064AF3A  // 76
  };

  enum zERenderObject {
    Other      = 0,
    Indoor     = 65, // 0x0064AE2A
    Outdoor    = 53, // 0x0064AE01
    Effects    = 58, // 0x005D8F87
    Shadows    = 59, // 0x00650D2C
    Barrier    = 21, // 0x00652389
    ScreenText = 73, // 0x0064B1BE
    Interface  = 100
  };
#endif

  inline ulong GetD3DTOP( zERenderObject rndObj ) {
    switch( rndObj ) {
      case zERenderObject::Indoor:
        return D3DTOP_ADDSMOOTH;// indoorFunc; // D3DTOP_SELECTARG2; D3DTSS_MAXMIPLEVEL !!!!

      case zERenderObject::Outdoor:
        return D3DTOP_MODULATE2X;

      case zERenderObject::Barrier:
      case zERenderObject::ScreenText:
      case zERenderObject::Interface:
        return D3DTOP_MODULATE;
    }

    ulong d3dTop;
    zCRnd_D3D::xd3d_pd3dDevice7->GetTextureStageState( 0, D3DTSS_COLOROP, &d3dTop );
    return d3dTop;
  }
}